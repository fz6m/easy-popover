/*!
 * easy-popover v1.0.0
 * (c) 2020-2021 fz6m
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).EasyPopover=e()}(this,(function(){"use strict";!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}(".u-hide{display:none!important}");var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var e=function(t){return t&&t.Math==Math&&t},n=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||Function("return this")(),o=function(t){try{return!!t()}catch(t){return!0}},r=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),i={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,l={f:c&&!i.call({1:2},1)?function(t){var e=c(this,t);return!!e&&e.enumerable}:i},a=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},u={}.toString,f="".split,p=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==function(t){return u.call(t).slice(8,-1)}(t)?f.call(t,""):Object(t)}:Object,s=function(t){return p(function(t){if(null==t)throw TypeError("Can't call method on "+t);return t}(t))},d=function(t){return"object"==typeof t?null!==t:"function"==typeof t},h=function(t,e){if(!d(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!d(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!d(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!d(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")},v={}.hasOwnProperty,y=function(t,e){return v.call(t,e)},b=n.document,m=d(b)&&d(b.createElement),w=!r&&!o((function(){return 7!=Object.defineProperty((t="div",m?b.createElement(t):{}),"a",{get:function(){return 7}}).a;var t})),g=Object.getOwnPropertyDescriptor,E={f:r?g:function(t,e){if(t=s(t),e=h(e,!0),w)try{return g(t,e)}catch(t){}if(y(t,e))return a(!l.f.call(t,e),t[e])}},N=/#|\.prototype\./,T=function(t,e){var n=P[k(t)];return n==S||n!=j&&("function"==typeof e?o(e):!!e)},k=T.normalize=function(t){return String(t).replace(N,".").toLowerCase()},P=T.data={},j=T.NATIVE="N",S=T.POLYFILL="P",L=T,O={},C=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},F=function(t,e,n){if(C(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,o){return t.call(e,n,o)};case 3:return function(n,o,r){return t.call(e,n,o,r)}}return function(){return t.apply(e,arguments)}},x=function(t){if(!d(t))throw TypeError(String(t)+" is not an object");return t},H=Object.defineProperty,A={f:r?H:function(t,e,n){if(x(t),e=h(e,!0),x(n),w)try{return H(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},I=r?function(t,e,n){return A.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t},B=E.f,D=function(t){var e=function(e,n,o){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,o)}return t.apply(this,arguments)};return e.prototype=t.prototype,e},M=function(t,e){var o,r,i,c,l,a,u,f,p=t.target,s=t.global,d=t.stat,h=t.proto,v=s?n:d?n[p]:(n[p]||{}).prototype,b=s?O:O[p]||(O[p]={}),m=b.prototype;for(i in e)o=!L(s?i:p+(d?".":"#")+i,t.forced)&&v&&y(v,i),l=b[i],o&&(a=t.noTargetGet?(f=B(v,i))&&f.value:v[i]),c=o&&a?a:e[i],o&&typeof l==typeof c||(u=t.bind&&o?F(c,n):t.wrap&&o?D(c):h&&"function"==typeof c?F(Function.call,c):c,(t.sham||c&&c.sham||l&&l.sham)&&I(u,"sham",!0),b[i]=u,h&&(y(O,r=p+"Prototype")||I(O,r,{}),O[r][i]=c,t.real&&m&&!m[i]&&I(m,i,c)))},q=[].slice,U={},z=function(t,e,n){if(!(e in U)){for(var o=[],r=0;r<e;r++)o[r]="a["+r+"]";U[e]=Function("C,a","return new C("+o.join(",")+")")}return U[e](t,n)};M({target:"Function",proto:!0},{bind:Function.bind||function(t){var e=C(this),n=q.call(arguments,1),o=function(){var r=n.concat(q.call(arguments));return this instanceof o?z(e,r.length,r):e.apply(t,r)};return d(e.prototype)&&(o.prototype=e.prototype),o}});var R,G=(R="Function",O[R+"Prototype"]).bind,V=Function.prototype,Y=function(t){var e=t.bind;return t===V||t instanceof Function&&e===V.bind?G:e};function J(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}M({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperty:A.f});var K=function(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}((function(t){var e=O.Object,n=t.exports=function(t,n,o){return e.defineProperty(t,n,o)};e.defineProperty.sham&&(n.sham=!0)}));function Q(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),K(t,o.key,o)}}function W(t,e,n){return e&&Q(t.prototype,e),n&&Q(t,n),t}var X,Z=function(t){var e=document.querySelector(t);if(!e)throw new Error("select 不能为空");return e},$="u-hide",_=function(t){t&&!t.classList.contains($)&&t.classList.add($)};!function(t){t.CREATE="create",t.DEFAULT="default"}(X||(X={}));var tt=function(t){return"function"==typeof t?t:void 0},et=function(t,e){return arguments.length<2?tt(O[t])||tt(n[t]):O[t]&&O[t][e]||n[t]&&n[t][e]}("navigator","userAgent")||"",nt=[].slice,ot=function(t){return function(e,n){var o=arguments.length>2,r=o?nt.call(arguments,2):void 0;return t(o?function(){("function"==typeof e?e:Function(e)).apply(this,r)}:e,n)}};M({global:!0,bind:!0,forced:/MSIE .\./.test(et)},{setTimeout:ot(n.setTimeout),setInterval:ot(n.setInterval)});var rt=O.setTimeout,it=function(){function t(e){var n,o;J(this,t),this.popNode=e.popNode,this.callback=null!==(n=e.callback)&&void 0!==n?n:{popHide:function(t){},popShow:function(){},popShowBefore:function(){}},this.popHtml=e.popHtml,this.selectParentNode=e.selectParentNode,this.instantly=null===(o=e.instantly)||void 0===o||o,this.created=!1}return W(t,[{key:"event",value:function(){var t,e,n,o,r=this,i=function t(e){var n,o;r.popNode.contains(e.target)||(r.popNode.classList.add($),document.removeEventListener("click",t),null===(n=r.callback)||void 0===n||null===(o=n.popHide)||void 0===o||o.call(n,e))};this.popNode&&!this.popNode.classList.contains($)||(null===(t=this.callback)||void 0===t||null===(e=t.popShowBefore)||void 0===e||e.call(t),this.popNode.classList.remove($),rt((function(){document.addEventListener("click",i)}),0),null===(n=this.callback)||void 0===n||null===(o=n.popShow)||void 0===o||o.call(n))}},{key:"createEvent",value:function(){var t;return Y(t=this.event).call(t,this)}}]),t}(),ct=function(){function t(e){var n;J(this,t),this.mode=null!==(n=e.mode)&&void 0!==n?n:X.DEFAULT,this.callback=e.callback,this.node=Z(e.select),this.popNode=e.popSelect?Z(e.popSelect):this.node.nextElementSibling;var o=e.selectParent?Z(e.selectParent):this.node.parentElement;this.clickEvent=new it({popNode:this.popNode,callback:e.callback,popHtml:e.popHtml,instantly:e.instantly,selectParentNode:o})}return W(t,[{key:"init",value:function(){if(this.mode===X.DEFAULT){_(this.popNode);var t=this.clickEvent.createEvent();this.node.addEventListener("click",t)}if(this.mode===X.CREATE){var e,n,o=this.clickEvent;o.popNode=null;var r=null===(e=o.callback)||void 0===e?void 0:e.popHide,i=null===(n=o.callback)||void 0===n?void 0:n.popShowBefore,c=function(){if(!this.created||this.instantly){var t=document.createElement("div");t.innerHTML=this.popHtml,this.popNode=t.firstElementChild,_(this.popNode),this.selectParentNode.append(this.popNode),this.created=!0}i&&i.call(this)},l=function(t){this.instantly&&(this.selectParentNode.removeChild(this.popNode),this.popNode=null),r&&r.call(this,t)};o.callback.popHide=Y(l).call(l,o),o.callback.popShowBefore=Y(c).call(c,o);var a=o.createEvent();this.node.addEventListener("click",a)}}}]),t}();return{init:function(t){new ct(t).init()}}}));
